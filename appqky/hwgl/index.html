<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>会务管理——会议日历</title>
<link href="css/hwgl.css" rel="stylesheet" type="text/css"/>
<!--框架css-->
<link href="css/common_2.0.css" rel="stylesheet" type="text/css"/>
<link href="css/qkyui.css" rel="stylesheet" type="text/css"/>


<!--公共js-->
<script src="bil/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="bil/jqui1.11.4/jquery-ui.min.js" type="text/javascript"></script>
<script>
var myDate = new Date();
var toy=myDate.getFullYear();    //获取完整的年份(4位,1970-????)
var tom=myDate.getMonth();       //获取当前月份(0-11,0代表1月)
var tod=myDate.getDate();        //获取当前日(1-31)
</script>
</head>

<body>
<!--顶部-->
<div class="qky_header">
    <div class="header2">
        <div class="qky_top_box clear3">
            <div class="qky_logo"><img height="36" src="images/top/logo2.png"></div>
            <div class="qky_top_search"><a href="#">全课云学校</a><a href="#">张三 教师</a><a href="#">安全退出</a><a href="#">设置</a></div>
            <div class="qky_top_button"><a href="#" class="trn"><i class="qkyicon">&#xe600;</i>返回桌面</a></div>
        </div>
    </div>
    <div class="header1">
        <div class="qky_top_box clear3">
            
            <div class="qky_tab fr w_co"><i class="qkyicon ">&#xe69c;</i>帮助</div>
            <div class="qky_tab fr w_co"><i class="qkyicon ">&#xe61d;</i>全课云APP</div>
            <div class="qky_tab fr w_co"><i class="qkyicon fz_4">&#xe616;</i></div>
        </div>
    </div>
</div>

<!--中部-->
<div class="qky_content">
    <div class="qky_main clear3">
    	<div class="qkynav_zu clear3">
            <a class="cur trn" href="index.html"><i class="appicon mr6">&#xe600;</i>会议日历</a>
            <a class="trn" href="index_cxhy.html"><i class="appicon mr6">&#xe601;</i>查询会议</a>
            <a class="trn" href="index_hygl.html"><i class="appicon mr6">&#xe602;</i>会议管理</a>
        </div>
        <div class="main_bg">
            <div class="hw_title">
                <div class="qkysel fl">
                    <a class="qkychbox trn fl yuan h34 mr6 cur" ischoose="0"><i class="qkyicon">&#xe69f;</i></a><label class="fl mr16 co_z3">所有会议</label>
                    <a class="qkychbox trn fl yuan h34 mr6" ischoose="0"><i class="qkyicon">&#xe69f;</i></a><label class="fl mr16 co_z3">已结束的会议</label>
                    <a class="qkychbox trn fl yuan h34 mr6" ischoose="0"><i class="qkyicon">&#xe69f;</i></a><label class="fl mr16 co_z3">进行中的会议</label>
                    <a class="qkychbox trn fl yuan h34 mr6" ischoose="0"><i class="qkyicon">&#xe69f;</i></a><label class="fl mr16 co_z3">未开始的会议</label>
                    <div class="clear"></div>
                </div>
                <a class="qkybut hbg fr brad4 M" onClick="popIn('#addhw')"><i class="appicon mr6">&#xe603;</i>新建会议</a>
                <div class="clear"></div>
            </div>
            
            <div class="hw_rlbox">
                <div class="qkysel center_l mt16">
                	<a class="qkybut hbg mr10 fl XS brad4" onClick="gomoon('','','prv')"><i class="qkyicon">&#xe68a;</i></a>
                    <div class="selshow inp fl L "><input type="text" value="" class="fz_18 t_c" id="ym"></div>
                    <a class="qkybut hbg ml10 fl XS brad4" onClick="gomoon('','','next')"><i class="qkyicon">&#xe668;</i></a>
                    <a class="qkybut hbg fr brad4 M" onClick="gomoon(toy,tom+1)">返回本月</a>
                    <div class="clear"></div>
                </div>
                <table cellpadding="0" cellspacing="0" border="0" class="wd_100 hwrl mt16" id="hwrl"></table>
            </div>
        </div>
    </div>
</div>

<div class="yc" id="rl_hover">
    <div class="rl_hover">
        <div class="rlh_tit"></div>
        <b><i class="appicon">&#xe606;</i>关闭</b>
        <ul></ul>
    </div>
</div>

<!--底部-->
<div class="qky_footer">
<div>广东全通教育股份有限公司  版权所有  ©2007-2015</div>
</div>

<!--弹窗---------------------------------->


<!--修改信息-->
<div class="qky_maskbox" id="addhw">
    <div class="qky_maskbg"></div>
    <div class="qky_maskmian XL">
        <div class="qky_masktit">新建会议<a class="maskclose" onClick="popOut('#addhw')"><i class="appicon">&#xe607;</i></a></div>
        <div class="qky_maskcont pa_lr16 pt16">
        	<div class="qkysel  mb16">
                <div class="seltxt fl dingw co_sbl">会议名称：</div>
                <div class="selshow fl wd_77 inp"><input type="text" value="" placeholder="请填写会议名称"></div>
                <div class="clear"></div>
            </div>
            <div class="qkysel   mb16">
                <div class="seltxt fl dingw co_sbl">发起人：</div>
                <div class="selshow fl wd_77 inp ba_f1 co_z9">王老师</div>
                <div class="clear"></div>
            </div>
            <div class="qkysel   mb16">
                <div class="seltxt fl dingw co_sbl"></div>
                <a class="qkychbox trn fl yuan h34 mr6" ischoose="0" onClick="popIn('#rensel');"><i class="qkyicon">&#xe69f;</i></a><label class="fl mr16 co_z6">指定参会</label>
                <a class="qkychbox trn fl yuan h34 mr6" ischoose="0"><i class="qkyicon">&#xe69f;</i></a><label class="fl mr16 co_z6">报名参会</label>
                <div class="clear"></div>
            </div>
        	<div class="qkysel  mb16">
                <div class="seltxt fl dingw co_sbl">参会人员：</div>
                <div class="selshow fl wd_77 inp"><input type="text" value="" placeholder="" id="ch_ren"></div>
                <div class="clear"></div>
            </div>
            <div class="qkysel  mb16">
                <div class="seltxt fl dingw co_sbl">会议地点：</div>
                <div class="selshow fl wd_77 inp"><input type="text" value="" placeholder=""></div>
                <div class="clear"></div>
            </div>
            <div class="qkytextarea mb16  float p100">
                 <div class="ta_tit  dingw co_sbl">会议内容：</div>
                 <textarea style="width:79%; min-height:100px;" placeholder="填写会议内容"></textarea>
                 <div class="clear"></div>
            </div>
            
        	<div class="qkysel mb16">
                <div class="seltxt fl dingw co_sbl">会议时间：</div>
                <span class="co_gr2 mr6 fl "><i class="appicon fz_20">&#xe60a;</i></span><span class="co_z6 fl mr16 fz_14">开始时间</span>
                <div class="selshow fl inp hicon" style=" width:228px;">
                    <input type="text"  class="caldate" id="etime">
                    <a class="timeicon"><i class="qkyicon">&#xe709;</i></a>
                    <div class="qky_calendar"></div>
                </div>
                <div class="clear"></div>         
            </div>
            <div class="qkysel mb16">
            	<div class="seltxt fl dingw co_sbl"></div>
                <span class="co_ye2 mr6 fl "><i class="appicon fz_20">&#xe609;</i></span><span class="co_z6 fl mr16 fz_14">结束时间</span>
                <div class="selshow fl inp hicon" style=" width:228px;">
                    <input type="text"  class="caldate" id="etime">
                    <a class="timeicon"><i class="qkyicon">&#xe709;</i></a>
                    <div class="qky_calendar"></div>
                </div>
                <div class="clear"></div>
            </div>
            <div class="qkysel mb16">
                <div class="seltxt fl dingw co_sbl">提醒设置：</div>
                <span class=" mr6 fl "><i class="appicon fz_20">&#xe60c;</i></span><span class="co_z6 fl mr16 fz_14">消息提示</span>
                <div class="selshow fl inp hicon" style=" width:228px;">
                    <input type="text"  class="caldate" id="etime">
                    <a class="timeicon"><i class="qkyicon">&#xe709;</i></a>
                    <div class="qky_calendar" id="txsztime"></div>
                </div>
                <div class="clear"></div>
            </div>
            <div class="qkysel mb16">
                <div class="seltxt fl dingw co_sbl"></div>
                <a class="qkychbox trn fl yuan h34 mr6" ischoose="0"><i class="qkyicon">&#xe69f;</i></a><label class="fl mr16 co_z6">发送短信通知</label>
                <div class="clear"></div>
            </div>
            <div class="t_c mb26 mt16">
                <a class="qkybut hbg brad4 M  mr16"><i class="appicon mr6">&#xe60d;</i>提交</a>
                <a class="qkybut hbg brad4 M"><i class="appicon mr6">&#xe607;</i>取消</a>
            </div>
        </div>
    </div>
</div>


<div class="qky_maskbox" id="rensel" >
    <div class="qky_maskbg"></div>
    <div class="qky_maskmian XL">
        <div class="qky_masktit"><span id="titname">参会人员</span><a class="maskclose" onClick="popOut('#rensel')"><i class="appicon">&#xe607;</i></a></div>
        <div class="qky_maskcont pa_lr16 Pt16">
        	<div class="fl mt16 wd_40 ba_f9  rensel onesel">
            	<div class="qky_tit wd_100 ba_sbl t_c pa_tb12 co_w fz_16"> 学校人员</div>
                <div class="qkyinp ma_lrauto wd_90 mt10">
                     <div class="fl inpbut wd_10"><a><i class="appicon co_bl">&#xe612;</i></a></div>
                     <div class="fl inptext  wd_90"><input type="text" placeholder="搜索"></div>
                     <div class="clear"></div>
                </div>
                <ul>
                    <li>张老师</li>
                    <li>李老师</li>
                    <li>王老师</li>
                    <li>关老师</li>
                    <li>龚老师</li>
                </ul>
            </div>
            <div class="fl wd_20">
                <a class="qkybut hbg brad4 ma_lrauto auto wd_80 iskuai mt26" id="addren"><i class="appicon mr6">&#xe60e;</i>添加</a>
                <a class="qkybut hbg brad4 ma_lrauto auto wd_80 fhbg iskuai mt16" id="removeren"><i class="appicon mr6">&#xe622;</i>移除</a>
            </div>
            <div class="fr mt16 wd_40 ba_f9 rensel twosel">
                <div class="qky_tit wd_100 ba_sbl t_c pa_tb12 co_w fz_16"> 会议参会人员</div>
                <div class="qkyinp ma_lrauto wd_90 mt10">
                     <div class="fl inpbut wd_10"><a><i class="appicon co_bl">&#xe612;</i></a></div>
                     <div class="fl inptext  wd_90"><input type="text" placeholder="搜索"></div>
                     <div class="clear"></div>
                </div>
                <ul></ul>
            </div>
            <div class="clear"></div>
            
        	<div class="t_c mb26 mt16">
            <a class="qkybut hbg brad4 M  mr16" onClick="rensel_save()"><i class="appicon mr6">&#xe60d;</i>保存</a>
            <a class="qkybut hbg brad4 M" onClick="popOut('#rensel')"><i class="appicon mr6">&#xe607;</i>取消</a>
            </div>
        </div>
    </div>
</div>
<script language="JavaScript" charset="utf-8" src="js/qky_ui.js"></script>

<script>
var hwrldatas={
	"2016-8-1":[" 08:00 QQ会议","10:00 例会"],
	"2016-8-3":["08：00 例会","10：00 A项目会议","14：00  B项目会议","15：30  C项目会议","17：30  D项目会议"],
	"2016-8-4":[" 08:00 QQ会议","10:00 例会"],
	"2016-8-8":[" 08:00 QQ会议","10:00 例会"],
	"2016-8-10":[" 08:00 QQ会议","10:00 例会"],
	"2016-8-12":[" 08:00 QQ会议","10:00 例会"]
	}
	
var week=["周日","周一","周二","周三","周四","周五","周六",]	
	
$(function() {
	qkychbox_sigle();
	qkysel();
	/*日历启动（ 点击的元素id/class，容器元素id/class，是否默认给当天日期值0/1【默认不显示】，是否显示时分下拉选项0/1【默认显示】,是否让过去的天数显示正常0/1【默认正常显示】）*/
	calendar(".timeicon",".qky_calendar",1,1,0);
	$("#ym").val(toy+"年"+(tom+1)+"月");
	hwrl4_Xr(toy,tom+1,tod,$("#hwrl"));
	rensel();
});

function rensel(){
	rensel_style();
	$("#addren").click(function(){
		$(".onesel ul li.cur").clone().prependTo(".twosel ul");
		$(".onesel ul li.cur").remove();
		rensel_style()
	});
	$("#removeren").click(function(){
		$(".twosel ul li.cur").clone().prependTo(".onesel ul");
		$(".twosel ul li.cur").remove();
		rensel_style();
	});
}

function rensel_style(){
$(".rensel ul li").each(function(i) {
        $(this).click(function(){
			$(this).addClass("cur").siblings().removeClass("cur");
		});
    });
}

function rensel_save(){
	var ren='';
	$(".twosel ul li").each(function(i) {
        ren+=$(this).html()+",";
    });
	$("#ch_ren").val(ren);
	popOut('#rensel');
}

function gomoon(y,m,type){
	var thisy,thism;
	if(y!=''&&m!=''){
		thisy=y;
		thism=m;
	}else{
		var y_m=$("#ym").val().split("年");
		thisy=Number(y_m[0]);
		thism=Number(y_m[1].replace("月",""));
		if(type=="prv"){
			thism--;if(thism<1){thisy--;thism=12;}else{thisy=thisy;thism=thism;}
		}else{
			thism++;if(thism>12){thisy++;thism=1;}else{thisy=thisy;thism=thism;}	
		}
	}
	$("#ym").val(thisy+"年"+thism+"月");
	hwrl4_Xr(thisy,thism,tod,$("#hwrl"));
}

//会务渲染日历指定年月的列表
function hwrl4_Xr(y,m,d,id){
	var weekHtml="<tr>";
	var moomHtml="";
	md=DayNumOfMonth(y,m);//获取当前月天数
	var dates=new Date(y,m-1,1);
	var mfd=dates.getDay();//获取第一天星期几，0为星期天
	//获取此月周数
	var forweek=Math.ceil((md+mfd)/7);
	id.html('<tr><th>日</th><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th></tr>'); 
	for(var i=0;i<forweek;i++){
		for(var j=0;j<7;j++){
			//j+(i*7)为加了前空白期的循环下标
			if((j+(i*7))<mfd){
			weekHtml+='<td>&nbsp;</td>';
			}else{
				var thisday=j+(i*7)-mfd+1;
				//(j+(i*7))-mfd+1为真正日数，即几号；
				if(thisday>md){
					weekHtml+='<td>&nbsp;</td>';
				}else {
					var ds='';
					if(thisday<10)ds="0"+thisday;else ds=thisday;
					if(thisday==d&&y==toy&&m==tom+1){
						weekHtml+='<td><a date="'+y+'-'+m+'-'+thisday+'" class="today"></a></td>';
					}else{
						weekHtml+='<td><a date="'+y+'-'+m+'-'+thisday+'"></a></td>';
					}
				}
			}
		}
		moomHtml+=weekHtml+"</tr>";
		weekHtml="<tr>";
	}
	id.append(moomHtml);
	
	//增加数据
	$(id).find("a").each(function(i) {
		var thisrl=$(this).attr("date");
        var thistime=new Date($(this).attr("date").replace(/\-/g, "\/"));
		var todaytime=new Date(toy,tom,tod);
		var thisrl1=thisrl.split("-");
		var thisweek=thistime.getDay();
		
		if(thistime<todaytime){
			$(this).addClass("oldday");
		}
		for(var key in hwrldatas){
			if(key==thisrl){
				$("#rl_hover").find(".rlh_tit").html("<label>"+thisrl1[1]+"月"+thisrl1[2]+"日</label><em>"+week[thisweek]+"</em>");
				$(this).append($("#rl_hover").html());//插入滑动悬停
				for(var o=0;o<hwrldatas[key].length;o++){
					$(this).append("<span class='rlspan'>"+hwrldatas[thisrl][o]+"</span>");//插入日历事件
					$(this).find(".rl_hover ul").append("<li>"+hwrldatas[thisrl][o]+"</li>");//插入日历事件到悬停下拉
				}
				if($(this).find(".rlspan").length>=3){
					$(this).find(".rlspan").eq(2).after("<span class='rlspan t_c hbtl'>更多...</span>");//展示超三显示更多
				}
			}
		}
    });
}



</script>
</body>
</html>
