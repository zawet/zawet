<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>就餐管理—就餐统计</title>
<link href="css/clgl.css" rel="stylesheet" type="text/css"/>
<!--框架css-->
<link href="css/common_2.0.css" rel="stylesheet" type="text/css"/>
<link href="css/qkyui.css" rel="stylesheet" type="text/css"/>


<!--公共js-->
<script src="bil/echarts.common.min.js"></script>
<script src="bil/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="bil/jqui1.11.4/jquery-ui.min.js" type="text/javascript"></script>
</head>

<body>
<!--顶部-->
<div class="qky_header">
    <div class="header2">
        <div class="qky_top_box clear3">
            <div class="qky_logo"><img height="36" src="images/top/logo2.png"></div>
            <div class="qky_top_search"><a href="#">全课云学校</a><a href="#">张三 教师</a><a href="#">安全退出</a><a href="#">设置</a></div>
            <div class="qky_top_button"><a href="#" class="trn"><i class="qkyicon">&#xe600;</i>返回桌面</a></div>
        </div>
    </div>
    <div class="header1">
        <div class="qky_top_box clear3">
            <ul class="qky_top_navs yc">
            <li><a href="index.html" ><i class="jcicon">&#xe604;</i>菜单管理</a></li>
            <li><a href="index_jctj.html" class="cur"><i class="jcicon">&#xe605;</i>就餐统计</a></li>
            <li><a href="index_kcgl.html" ><i class="jcicon">&#xe606;</i>库存管理</a></li>
            </ul>
            <div class="qky_tab fr w_co"><i class="qkyicon ">&#xe69c;</i>帮助</div>
            <div class="qky_tab fr w_co"><i class="qkyicon ">&#xe61d;</i>全课云APP</div>
            <div class="qky_tab fr w_co"><i class="qkyicon fz_4">&#xe616;</i></div>
        </div>
    </div>
</div>

<!--中部-->
<div class="qky_content">
    <div class="qky_main ">
    	<div class="qkynav_zu clear3">
        <a class="trn" href="index.html"><i class="jcicon">&#xe604;</i>菜单管理</a>
        <a class="trn cur" href="index_jctj.html"><i class="jcicon">&#xe605;</i>就餐统计</a>
        <a class="trn" href="index_kcgl.html"><i class="jcicon">&#xe606;</i>库存管理</a>
        </div>
        <div class="jcgl_main">
        	<div class="pa_lr16">
                <div class="qkysel fl clear3 mt16 mb16">
                   <a class="qkychbox trn fl cur yuan h34 mr6 showway" ischoose="0" way="week"><i class="qkyicon">&#xe69f;</i></a><label class="fl mr10">按周统计</label>
                   <a class="qkychbox trn fl yuan h34 mr6 showway" ischoose="0" way="moon"><i class="qkyicon">&#xe69f;</i></a><label class="fl mr10">按月统计</label>
                </div>
                <div class="jc_bigtitle fr">当前教师报餐人数：<span>1,100</span></div>
                <div class="clear"></div>
                
                <div class="tjinfo_left fl mt6">
                    <ul>
                        <li class="cur trn"><a>早餐</a></li>
                        <li class="trn"><a>午餐</a></li>
                        <li class="trn"><a>晚餐</a></li>
                    </ul>
                </div>
                <div class="tjinfo_right fr mt6">
                    <table cellpadding="0" cellspacing="0" border="0" class="qkytable type3"><tr class="uptit"><th colspan="7" id="date_title"></th></tr></table>
                    <div class="gd">
                        <table cellpadding="0" cellspacing="0" border="0" class="qkytable type3" id="qkytable">
                        <!--<tr>
                            <td>2016/07/11 星期一</td>
                            <td>2333</td><td>2333</td><td>2333</td><td>2333</td>
                            <td>有11位老师点餐没吃</td>
                            <td><a class="qkybut hbg brad4 S" onClick="popIn('#bjb')">补录</a></td>
                            </tr>
                            
                            <tr>
                            <td>2016/07/12 星期二</td>
                            <td>2333</td><td>2333</td><td>2333</td><td>2333</td>
                            <td>有11位老师点餐没吃</td>
                            <td><a class="qkybut hbg brad4 S" onClick="popIn('#bjb')">补录</a></td>
                            </tr> 
                            <tr>
                            <td>2016/07/13 星期三</td>
                            <td>2333</td><td>2333</td><td>2333</td><td>2333</td>
                            <td>有11位老师点餐没吃</td>
                            <td><a class="qkybut hbg brad4 S" onClick="popIn('#bjb')">补录</a></td>
                            </tr> 
                            <tr>
                            <td>2016/07/14 星期四</td>
                            <td>2333</td><td>2333</td><td>2333</td><td>2333</td>
                            <td>有11位老师点餐没吃</td>
                            <td><a class="qkybut hbg brad4 S" onClick="popIn('#bjb')">补录</a></td>
                            </tr> 
                            <tr>
                            <td>2016/07/15 星期五</td>
                            <td>2333</td><td>2333</td><td>2333</td><td>2333</td>
                            <td>有11位老师点餐没吃</td>
                            <td><a class="qkybut hbg brad4 S" onClick="popIn('#bjb')">补录</a></td>
                            </tr>
                            <tr>
                            <td>2016/07/16 星期六</td>
                            <td>2333</td><td>2333</td><td>2333</td><td>2333</td>
                            <td>有11位老师点餐没吃</td>
                            <td><a class="qkybut hbg brad4 S" onClick="popIn('#bjb')">补录</a></td>
                            </tr> 
                            <tr>
                            <td>2016/07/17 星期日</td>
                            <td>2333</td><td>2333</td><td>2333</td><td>2333</td>
                            <td>有11位老师点餐没吃</td>
                            <td><a class="qkybut hbg brad4 S" onClick="popIn('#bjb')">补录</a></td>
                            </tr> --> 
                        </table>
                    </div>
                    
				</div>
                <div class="clear"></div>
                
                <div class="databox">
                    <div class="datatit tea">教师午餐实际用餐人数本周折线图</div>
                    <div class="datamain" id="teadata"></div>
                </div>
                <div class="databox">
                    <div class="datatit stu">学生午餐实际用餐人数本周折线图</div>
                    <div class="datamain" id="studata"></div>
                </div>
                <div class="databox">
                    <div class="datatit all">午餐总用餐人数本周折线图</div>
                    <div class="datamain" id="alldata"></div>
                </div>
               
            </div>
        </div>   
    </div>
</div>

<!--底部-->
<div class="qky_footer">
<div>广东全通教育股份有限公司  版权所有  ©2007-2015</div>
</div>

<!--弹窗---------------------------------->

<!--就餐统计编辑表-->
<div class="qky_maskbox" id="bjb">
    <div class="qky_maskbg"></div>
    <div class="qky_maskmian W600">
        <div class="qky_masktit">2016-06-23 星期四就餐统计编辑表<a class="maskclose" onClick="popOut('#bjb')"><i class="qkyicon">&#xe6aa;</i></a></div>
        <div class="qky_maskcont clear3  pa_lr16 Pt16">
        	
            <div class="qkysel  fl mb16">
                <div class="seltxt fl">教师报餐人数：</div>
                <div class="selshow fl M inp"><input type="text" value="" placeholder="46"></div><div class="clear"></div>
            </div>
            <div class="qkysel  fr mb16">
                <div class="seltxt fl">教师用餐人数：</div>
                <div class="selshow fl M inp"><input type="text" value="" placeholder="45"></div><div class="clear"></div>
            </div>
            <div class="qkysel  fl mb16">
                <div class="seltxt fl">学生用餐人数：</div>
                <div class="selshow fl M inp"><input type="text" value="" placeholder="100"></div><div class="clear"></div>
            </div>
            
            <div class="qkysel  fr mb16">
                <div class="seltxt fl">总用餐人数：</div>
                <div class="selshow fl M inp"><input type="text" value="" placeholder="145"></div><div class="clear"></div>
            </div>

            <div class="clear"></div>
            <div class="qkytextarea p100  mb16 float">
                <div class="ta_tit" style=" width:96px; text-align:right;">备注：</div>
                <textarea class="fr" style="width:82%;">输入备注信息</textarea>
                <div class="clear"></div>
             </div>
             
            
            <div class="t_c mb26">
            <a class="qkybut hbg brad4 M mr16"><i class="jcicon mr6">&#xe614;</i>确定</a>
            <a class="qkybut hbg brad4 M" onClick="popOut('#bjb')"><i class="jcicon mr6">&#xe609;</i>取消</a>
            </div>
        </div> 
    </div>
</div>


<script language="JavaScript" charset="utf-8" src="js/qky_ui.js"></script>
<script language="JavaScript" charset="utf-8" src="js/user_public.js"></script>
<script src="js/tb_h5.js"></script>
<script>
/**数据导入规则，一导入就导入一个月的数据，没到的天数或者当天没提供餐选择的把数据设置成0,周展示时，跨月周分为两个周来展示**/

//模拟数据
var teadata=[21, 39, 19, 43,10,18,30,21, 39, 19, 43,17,12,24,21, 39, 19, 43,25,28,29,21, 39, 19, 43,31,37,33,28,29,21];
var studata=[21, 39, 19, 43,10,18,30,21, 39, 19, 43,17,12,24,21, 39, 19, 43,25,28,29,21, 39, 19, 43,31,37,33,28,29,21];
var alldata=[21, 39, 19, 43,10,18,30,21, 39, 19, 43,17,12,24,21, 39, 19, 43,25,28,29,21, 39, 19, 43,31,37,33,28,29,21];
var t_color=[["#b5c334","#e5e9b7","#93a01e"],["#c1232b","#ffe6e0","#c54627"],["#fdd010","#fef1bc","#f98222"]];
var week_tit='2016-07-11 至 2016-07-17 周报';
var moon_tit='2016-07-01 至 2016-07-31 月报';


$(function() {
	qkychbox_sigle();
	Timeslot("week");
	//单选选择
	$(".showway").each(function(i) {
        $(this).click(function(){
			Timeslot($(this).attr("way"));
		});
    });
});

//显示哪种时间段
function Timeslot(type){
	if(type=="moon"){
	Xrqkytable("2016_7",1,31,type);
	$("#date_title").html(moon_tit);
	Xrech('teadata','教师用餐人数',teadata,t_color[0],"2016_7",1,100);
	Xrech('studata','学生用餐人数',studata,t_color[1],"2016_7",1,100);
	Xrech('alldata','全部用餐人数',alldata,t_color[2],"2016_7",1,100);	
	}
	if(type=="week"){
	Xrqkytable("2016_7",11,17,type);
	$("#date_title").html(week_tit);
	Xrech('teadata','教师用餐人数',teadata,t_color[0],"2016_7",11,17);
	Xrech('studata','学生用餐人数',studata,t_color[1],"2016_7",11,17);
	Xrech('alldata','全部用餐人数',alldata,t_color[2],"2016_7",11,17);	
	}
}

//渲染表格列表
function Xrqkytable(y_m,sd,ed,type){
	 var yr=Number(y_m.split("_")[0]);
	 var mo=Number(y_m.split("_")[1]);
	 var thismdays=DayNumOfMonth(yr,mo);
	 var slotdays=ed-sd;
	 var fornum=0;
	 if(type=="week")fornum=slotdays+sd; else fornum=thismdays;
	 
	 if(slotdays<=0){
		 alert("暂时不支持跨月展示信息！")
	 }else{
		 $("#qkytable").html('<tr class="maintit"><th>日期</th><th>教师报餐人数</th><th>教师用餐人数</th><th>学生用餐人数</th><th>总用餐人数</th><th>备注</th><th>操作</th></tr>');
		 var htmls='';
		 var htmlss='<td>2333</td><td>2333</td><td>2333</td><td>2333</td><td>有11位老师点餐没吃</td><td><a class="qkybut hbg brad4 S" onClick="popIn(\'#bjb\')">补录</a></td>';
	 	for(var i=sd;i<=fornum;i++){
			htmls+="<td>"+yr+"/"+mo+"/"+i+" 星期"+weeks(yr,mo,i)+"</td>"+htmlss;
			$("#qkytable").append("<tr>"+htmls+"</tr>");
			htmls='';
		}
	 } 	
}
//获取指定日期是想起几
function weeks(y,m,d){
	var str ="日一二三四五六".charAt(new Date(y,m-1,d).getDay());
	return str;
}



</script>
</body>
</html>
